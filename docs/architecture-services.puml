@startuml
skinparam backgroundColor #ffffff
skinparam shadowing false

rectangle "Stations" as Stations {
  [service-station] as S1
  [service-station] as S2
  [service-station] as S3
}

[service-gateway] as GW
[service-broker] as BR
[service-degrader] as DG
[service-telegram] as TG
[service-orchestrator] as ORCH
[frontend] as FE
[api client] as Client
[docker engine] as DOCKER
[telegram api] as TAPI

S1 --> GW : register + heartbeat
S2 --> GW : register + heartbeat
S3 --> GW : register + heartbeat
DG --> GW : adjust
GW --> S1 : adjust
GW --> S2 : adjust
GW --> S3 : adjust

S1 --> BR : state updates
S2 --> BR : state updates
S3 --> BR : state updates
BR --> FE : WebSocket /ws
Client --> ORCH : create station
ORCH --> DOCKER : Docker API
ORCH --> S1 : bootstrap
BR --> TG : alerts (warn/bad/critical/offline)
TG --> TAPI : sendMessage
@enduml
